# Активные задачи

## Текущая задача: Обновление цветовой схемы сайта

**Тип задачи:** Level 3 - Intermediate Feature  
**Статус:** В процессе анализа  
**Дата начала:** $(date)

### Описание задачи

Обновить цветовую схему всего сайта под новые требования к иконкам:

- **Иконки:** Плоские векторные в минималистичном мультяшном стиле
- **Контуры:** Тёмно-фиолетовый цвет, средняя толщина
- **Заливки:** Пастельные цвета (голубой, бирюзовый, зелёный, розовый, бежевый, желтый)
- **Стиль:** Простые формы с округлыми углами, без теней, градиентов и бликов
- **Детали:** Минимум деталей, только плоские цвета

### Текущее состояние

- [x] Memory Bank создан
- [x] Задача определена как Level 3
- [x] Анализ текущей цветовой схемы
- [x] Определены области воздействия
- [ ] Разработка новой палитры
- [ ] Планирование миграции
- [ ] Технологическая валидация
- [ ] Фазы творческого проектирования

### Области для изменения

1. **CSS переменные** в `src/app/globals.css`
2. **Tailwind конфигурация** в `tailwind.config.js`
3. **Компоненты UI** - все стили под новую палитру
4. **Темы** - светлая и темная темы
5. **Иконки** - обновление под новый стиль

## Анализ текущей системы (ЗАВЕРШЁН)

### Текущая тропическая палитра

```css
:root {
  --tropical-blue: 27, 104, 164; /* #1B68A4 */
  --deep-ocean: 25, 155, 215; /* #199BD7 */
  --coral: 244, 123, 37; /* #F47B25 */
  --sea-green: 17, 185, 129; /* #11B981 */
}
```

### Затронутые компоненты (105 вхождений)

**Критические компоненты для обновления:**

1. **AutocompleteItem.tsx** - tropical-blue/deep-ocean градиенты
2. **Autocomplete.tsx** - tropical-blue для фокуса/границ
3. **Button.tsx** - все варианты кнопок (primary, coral)
4. **Icon.tsx** - bg-tropical-blue/15 для фонов иконок
5. **Notification.tsx** - все типы уведомлений
6. **DiveSiteTooltip.tsx** - границы tropical-blue
7. **SiteTypeFilters** - bg-tropical-blue для выбранных фильтров

### Градиентная система

- **gradient-ocean:** tropical-blue → deep-ocean
- **gradient-coral:** coral → ea580c
- **gradient-sunset:** ff6b6b → feca57
- **gradient-deep-sea:** deep-ocean → 1e40af

### Система иконок

- **Файлы:** 30+ SVG в `/public/img/`
- **Компонент:** `Icon.tsx` с backgroundImage
- **Стиль:** текущий неизвестен, требует анализа SVG
- **Фоны:** `bg-tropical-blue/15` для withBackground

## Требования к новой системе

### Новая палитра (тёмно-фиолетовые + пастельные)

**Контурный цвет:** тёмно-фиолетовый (основной)
**Пастельные заливки:**

- Голубой пастельный
- Бирюзовый пастельный
- Зелёный пастельный
- Розовый пастельный
- Бежевый пастельный
- Желтый пастельный

### Стилистические требования

- ❌ Убрать: gradients, shadows, glassmorphism эффекты
- ✅ Добавить: плоские цвета, округлые углы, минимализм
- ✅ Сохранить: систему тем, accessibility, переходы, **анимации бликов**

## Планирование миграции

### Фаза 1: Дизайн новой палитры (CREATIVE Mode) ✅ ЗАВЕРШЕНА

**Задачи:**

- [x] Определить точные hex-коды для пастельных цветов ✅
- [x] Создать мапинг старой → новой палитры ✅
- [x] Обеспечить контрастность для accessibility ✅
- [x] Адаптировать под светлую/темную темы ✅

**Результат:** Сбалансированная пастельная палитра создана в `creative-color-palette.md`

### Фаза 2: Технологическая валидация

**Задачи:**

- [ ] Создать proof-of-concept с новыми цветами
- [ ] Проверить совместимость с CSS переменными
- [ ] Валидировать Tailwind конфигурацию
- [ ] Тестовая сборка проекта

### Фаза 3: Поэтапная реализация

**Этап 3.1: CSS/Tailwind базовая система**

- [ ] Обновить CSS переменные в globals.css
- [ ] Обновить цвета в tailwind.config.js
- [ ] Убрать/адаптировать градиенты под плоский стиль
- [ ] Обновить shadow/glow эффекты
- [ ] **Сохранить анимации бликов** (water-shimmer, button-shine)

**Этап 3.2: Базовые UI компоненты**

- [ ] Button.tsx - новые варианты без градиентов
- [ ] Icon.tsx - новые фоны для иконок
- [ ] Notification.tsx - плоские стили уведомлений

**Этап 3.3: Автокомплит система**

- [ ] Autocomplete.tsx/AutocompleteItem.tsx
- [ ] Убрать градиенты, заменить на плоские цвета

**Этап 3.4: Интерактивные компоненты**

- [ ] DiveSiteTooltip.tsx
- [ ] SiteTypeFilters - новые стили выбора
- [ ] InfoPanel компоненты

**Этап 3.5: Тестирование**

- [ ] Visual regression тесты
- [ ] Accessibility проверка
- [ ] E2E тесты функционала
- [ ] Проверка в светлой/темной темах

### Ключевые файлы для изменения

**Основные:**

- `src/app/globals.css` - CSS переменные и эффекты
- `tailwind.config.js` - цветовая конфигурация

**Компоненты (23 файла):**

- `src/components/ui/Button.tsx`
- `src/components/ui/Autocomplete/*.tsx` (2 файла)
- `src/components/ui/Notification/Notification.tsx`
- `src/components/icons/Icon.tsx`
- `src/components/map/DiveSiteTooltip.tsx`
- `src/components/FiltersPanel/SiteTypeFilters/*`
- `src/components/InfoPanel/InfoPanelContent.tsx`

**Тесты (8+ файлов):**

- Все `__tests__` файлы с цветовыми проверками

## Анимации бликов для адаптации

### Текущие анимации (СОХРАНИТЬ)

**В Button.tsx:**

- `button-shine` - блик при hover на всех кнопках ✅
- `water-shimmer-multiple` - дополнительный эффект (shimmer prop) ✅
- `animate-pulse-glow` - пульсирующее свечение (glow prop) ✅

**В CSS globals.css:**

- `@keyframes button-shine` - механика блика
- `@keyframes water-shimmer` - эффект солнечных бликов
- `@keyframes multiple-shimmers` - несколько бликов

### Адаптация цветов

**Обновить цвета бликов:**

- `rgba(27, 104, 164, 0.1)` → новый пастельный цвет
- `rgba(255, 255, 255, 0.4)` → адаптировать под контрастность
- Градиенты `90deg, transparent, rgba(...)` → новая палитра

## Технологическая валидация

### Технологический стек

- **Framework:** Next.js 14 ✅ (совместим)
- **Styling:** Tailwind CSS ✅ + CSS Variables ✅
- **Build Tool:** Next.js встроенная сборка ✅
- **Icons:** SVG files ⚠️ (требует анализа/обновления)

### Валидационные проверки

**Обязательные проверки:**

- [ ] CSS Variables совместимость с новой палитрой
- [ ] Tailwind конфигурация принимает новые цвета
- [ ] SVG иконки соответствуют новому стилю
- [ ] Система тем работает с новыми цветами
- [ ] Build процесс проходит успешно
- [ ] Accessibility стандарты соблюдены

### Hello World Proof of Concept

**Создать minimal POC:**

- [ ] Новые CSS переменные в тестовом файле
- [ ] Одна кнопка с новыми цветами
- [ ] Одна иконка в новом стиле
- [ ] Переключение светлой/темной темы
- [ ] Успешная сборка и запуск

## Компоненты требующие CREATIVE дизайна

### UI/UX Design фаза ✅ ЗАВЕРШЕНА

**Критические компоненты:**

- [x] **Цветовая палитра** - создана сбалансированная пастельная палитра ✅
- [x] **Button система** - семантические варианты без градиентов ✅
- [x] **Icon система** - пастельные фоны по категориям ✅
- [x] **AutoComplete** - плоский дизайн с семантическими цветами ✅
- [x] **Notification** - минималистичные уведомления с левыми границами ✅
- [x] **Slider** - интерактивная минималистичная система ✅
- [x] **Chip** - сбалансированный плоский дизайн ✅
- [x] **Map Components** - морская тематика с пастельными цветами ✅

### Дизайнерские решения ✅ ЗАВЕРШЕНЫ

**Требуют творческого подхода:**

- [x] Мапинг tropical → pastel цветов ✅
- [x] **Адаптация анимаций бликов** под новую цветовую палитру ✅
- [x] Accessibility в темной теме для пастельных цветов ✅
- [x] Замена градиентов на плоские альтернативы ✅
- [x] Новые hover/focus состояния без glow (но с анимациями бликов) ✅

**Созданные creative документы:**

- `creative-color-palette.md` - основная пастельная палитра
- `creative-button-system.md` - 8 семантических вариантов кнопок
- `creative-icon-system.md` - 6 категорий иконок с пастельными фонами
- `creative-autocomplete.md` - плоский дизайн с семантическими типами
- `creative-notification.md` - минималистичные уведомления с левыми границами
- `creative-slider.md` - интерактивная минималистичная система слайдеров
- `creative-chip.md` - сбалансированный плоский дизайн чипов
- `creative-map-components.md` - морская тематика map компонентов

## Риски и митигации

### Технические риски

1. **Риск:** Пастельные цвета могут не пройти accessibility тесты
   **Митигация:** Создать темную версию контуров для светлой темы
2. **Риск:** SVG иконки могут потребовать полной перерисовки  
   **Митигация:** Поэтапное обновление, начать с CSS стилизации

3. **Риск:** Система тем может сломаться с новыми цветами
   **Митигация:** Тщательное тестирование в обеих темах

### UX риски

1. **Риск:** Пользователи привыкли к текущему дизайну
   **Митигация:** Постепенное внедрение, начать с иконок
2. **Риск:** Плоский дизайн может показаться менее премиальным
   **Митигация:** Качественная типографика и spacing

## Критерии успеха

### Функциональные

- ✅ Все компоненты работают как раньше
- ✅ Система тем переключается корректно
- ✅ Accessibility стандарты соблюдены
- ✅ Build процесс стабилен

### Дизайнерские

- ✅ Иконки соответствуют требованиям (пастель + фиолетовые контуры)
- ✅ UI выглядит современно и минималистично
- ✅ Плоский дизайн без потери функциональности
- ✅ Консистентность во всех компонентах
