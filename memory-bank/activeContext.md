# –ê–ö–¢–ò–í–ù–´–ô –ö–û–ù–¢–ï–ö–°–¢: The Dive Map

## –¢–ï–ö–£–©–ò–ô –ü–†–û–ï–ö–¢

**–ù–∞–∑–≤–∞–Ω–∏–µ:** The Dive Map  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–∞—Ä—Ç–∞ –º–∏—Ä–∞ —Å –¥–∞–π–≤-—Å–∞–π—Ç–∞–º–∏  
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Next.js 15, Supabase, TypeScript, React 19

## –¢–ï–ö–£–©–ê–Ø –ó–ê–î–ê–ß–ê

**–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–π–≤-—Å–∞–π—Ç–æ–≤** - PLAN –†–ï–ñ–ò–ú

**–†–µ–∂–∏–º:** PLAN (–¥–µ—Ç–∞–ª—å–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
**–°–ª–µ–¥—É—é—â–∏–π —Ä–µ–∂–∏–º:** IMPLEMENT (–≥–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

### –ü–†–û–ì–†–ï–°–° –ó–ê–î–ê–ß–ò

- ‚úÖ **VAN –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω**
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å: Level 2 (Simple Enhancement)
  - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
  - –°–æ–∑–¥–∞–Ω –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–ª–∞–Ω
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ö–µ–º–µ –ë–î
  - –£—Ç–æ—á–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —á–∏—Å–ª–æ–≤—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤: "–æ—Ç –∏ –≤—ã—à–µ"

- ‚úÖ **PLAN —Ä–µ–∂–∏–º –∑–∞–≤–µ—Ä—à–µ–Ω**
  - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω
  - –ü–æ–¥–∑–∞–¥–∞—á–∏ —Ä–∞–∑–±–∏—Ç—ã –∏ –æ—Ü–µ–Ω–µ–Ω—ã
  - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
  - –í—ã–∑–æ–≤—ã –∏ –º–∏—Ç–∏–≥–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
  - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–π–¥–µ–Ω–∞
  - **–û–±–Ω–æ–≤–ª–µ–Ω –ø–æ–¥—Ö–æ–¥ –∫ –ø–æ–∏—Å–∫—É: –ø–æ ID –≤–º–µ—Å—Ç–æ –∏–º–µ–Ω–∏**

- üîÑ **–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:** IMPLEMENT —Ä–µ–∂–∏–º
  - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ API
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ TypeScript —Ç–∏–ø–æ–≤
  - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

##Ô∏è –¢–ï–ö–£–©–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase)

- **–¢–∞–±–ª–∏—Ü–∞ sites:** –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–∞–π–≤-—Å–∞–π—Ç–æ–≤
- **–°–≤—è–∑–∏:** countries, site_types, difficulties, regions, locations
- **–°—Ö–µ–º–∞:** –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–ª—é—á–∞–º–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** 
  - –°–≤—è–∑—å sites ‚Üí countries ‚Üí regions
  - –°–≤—è–∑—å sites ‚Üí site_locations ‚Üí locations
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏ (en/ru)

### API Layer

- **Endpoint:** `/api/dive-sites` ‚úÖ –ì–û–¢–û–í (–±–∞–∑–æ–≤—ã–π)
- **–§—É–Ω–∫—Ü–∏—è:** –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–π–≤-—Å–∞–π—Ç–æ–≤ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** Next.js App Router + Supabase
- **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (10 —Ç–∏–ø–æ–≤) - –ü–õ–ê–ù–ò–†–£–ï–¢–°–Ø

### Frontend (–≥–æ—Ç–æ–≤–∏—Ç—Å—è)

- **Framework:** Next.js 15
- **UI:** React 19
- **–°—Ç–∏–ª–∏:** (–ø–æ–∫–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ)
- **–ö–∞—Ä—Ç—ã:** (–ø–æ–∫–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ)

## –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö

- **Backend:** Next.js API Routes ‚úÖ
- **Database:** Supabase (PostgreSQL) ‚úÖ
- **Language:** TypeScript ‚úÖ
- **Package Manager:** pnpm
- **Testing:** Vitest + Playwright

## –ì–û–¢–û–í–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

- ‚úÖ Supabase –∫–ª–∏–µ–Ω—Ç (`src/lib/supabase.ts`)
- ‚úÖ API endpoint (`src/app/api/dive-sites/route.ts`)
- ‚úÖ TypeScript —Ç–∏–ø—ã (`src/types/database.ts`, `src/lib/types/supabase.ts`)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–∏–∞—Å–æ–≤ –≤ tsconfig.json

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –ü–†–ò–û–†–ò–¢–ï–¢–´

1. **IMPLEMENT —Ä–µ–∂–∏–º** - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ API
2. **QA —Ä–µ–∂–∏–º** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
3. **REFLECT —Ä–µ–∂–∏–º** - –†–µ—Ñ–ª–µ–∫—Å–∏—è –∏ –∞–Ω–∞–ª–∏–∑
4. **ARCHIVE —Ä–µ–∂–∏–º** - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
5. **–°–æ–∑–¥–∞–Ω–∏–µ UI** - –±–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
6. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç** - –¥–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å

## üîç –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ –§–ò–õ–¨–¢–†–ê–¶–ò–ò

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:**
- **–ü–æ ID –¥–∞–π–≤-—Å–∞–π—Ç–∞ (`id`)** - —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ UUID
- –ü–æ —Å—Ç—Ä–∞–Ω–µ (`country_id`)
- –ü–æ —Ä–µ–≥–∏–æ–Ω—É (`region_id`)
- –ü–æ –ª–æ–∫–∞—Ü–∏–∏ (`location_id`)
- –ü–æ —Ç–∏–ø—É —Å–∞–π—Ç–∞ (`site_type_id`)
- –ü–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (`difficulty_id`)
- –ü–æ –≥–ª—É–±–∏–Ω–µ (`depth_max_min`) - –æ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –≤—ã—à–µ
- –ü–æ –≤–∏–¥–∏–º–æ—Å—Ç–∏ (`visibility_min`) - –æ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –≤—ã—à–µ
- –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É (`rating_min`) - –æ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –≤—ã—à–µ
- –ü–æ —Å—Ç–∞—Ç—É—Å—É (`status`)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –ø–æ ID:**
- **UUID —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å:** –ö–∞–∂–¥—ã–π –¥–∞–π–≤-—Å–∞–π—Ç –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π UUID
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ü–æ–∏—Å–∫ –ø–æ UUID –±—ã—Å—Ç—Ä–µ–µ —á–µ–º ILIKE –ø–æ –∏–º–µ–Ω–∏
- **–¢–æ—á–Ω–æ—Å—Ç—å:** –ò—Å–∫–ª—é—á–∞–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É —Å –ø–æ—Ö–æ–∂–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
- **API –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
- **–ü—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å:** ID —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ URL –∏ —Å—Å—ã–ª–∫–∞—Ö

## –°–¢–ê–¢–£–° –ü–†–û–ï–ö–¢–ê

**–†–µ–∂–∏–º:** PLAN (–∑–∞–≤–µ—Ä—à–µ–Ω)  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** –ì–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –≤ IMPLEMENT —Ä–µ–∂–∏–º  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –î–µ–∫–∞–±—Ä—å 2024
