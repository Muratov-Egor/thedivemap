# –ê–†–•–ò–í: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase API –¥–ª—è –¥–∞–π–≤-—Å–∞–π—Ç–æ–≤

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** –î–µ–∫–∞–±—Ä—å 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Level 1 (Quick Setup)

## üéØ –¶–ï–õ–¨ –ó–ê–î–ê–ß–ò

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase –∏ —Å–æ–∑–¥–∞—Ç—å API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –¥–∞–π–≤-—Å–∞–π—Ç–æ–≤ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ Supabase

- [x] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/lib/supabase.ts` (–ø—Ä–æ—Å—Ç–æ–π –∫–ª–∏–µ–Ω—Ç)
- [x] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/lib/supabase/server.ts` (—Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–ª–∏–µ–Ω—Ç)
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω –∫–ª–∏–µ–Ω—Ç —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 2. –°–æ–∑–¥–∞–Ω–∏–µ API endpoint

- [x] –°–æ–∑–¥–∞–Ω `src/app/api/dive-sites/route.ts`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω GET –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö —Å–∞–π—Ç–æ–≤
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–≤—è–∑–∏ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TypeScript

- [x] –°–æ–∑–¥–∞–Ω—ã —Ç–∏–ø—ã –≤ `src/types/database.ts`
- [x] –°–æ–∑–¥–∞–Ω—ã —Ç–∏–ø—ã –≤ `src/lib/types/supabase.ts`
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω –∞–ª–∏–∞—Å `@` –≤ `tsconfig.json`

## üìÅ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

- `src/lib/supabase.ts` - –ø—Ä–æ—Å—Ç–æ–π –∫–ª–∏–µ–Ω—Ç Supabase
- `src/lib/supabase/server.ts` - —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–ª–∏–µ–Ω—Ç Supabase
- `src/app/api/dive-sites/route.ts` - API endpoint

### –¢–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

- `src/types/database.ts` - –æ–±—â–∏–µ —Ç–∏–ø—ã TypeScript
- `src/lib/types/supabase.ts` - —Ç–∏–ø—ã –¥–ª—è Supabase

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### API Endpoint

- **URL:** `/api/dive-sites`
- **–ú–µ—Ç–æ–¥:** GET
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –í—Å–µ –¥–∞–π–≤-—Å–∞–π—Ç—ã —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏

### –ó–∞–ø—Ä–æ—Å –∫ –ë–î

```sql
SELECT *,
  country:countries(*),
  site_type:site_types(*),
  difficulty:difficulties(*)
FROM sites
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```
NEXT_PUBLIC_SUPABASE_URL=–≤–∞—à_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=–≤–∞—à_–∫–ª—é—á
```

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –†–ï–®–ï–ù–ò–Ø

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ app/api/dive-sites/
‚îÇ   ‚îî‚îÄ‚îÄ route.ts              # API endpoint
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts           # –ü—Ä–æ—Å—Ç–æ–π –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ supabase/server.ts    # –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ types/supabase.ts     # –¢–∏–ø—ã Supabase
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ database.ts           # –û–±—â–∏–µ —Ç–∏–ø—ã –ë–î
```

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Framework:** Next.js 15.4.2
- **Database:** Supabase (PostgreSQL)
- **Language:** TypeScript 5
- **Package Manager:** pnpm 10.14.0

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏

‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Supabase —Å Next.js  
‚úÖ –°–æ–∑–¥–∞–Ω —Ä–∞–±–æ—á–∏–π API endpoint  
‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è TypeScript  
‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

- **–ß–∏—Å—Ç–æ—Ç–∞:** –í—ã—Å–æ–∫–∞—è - –ø—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∫–æ–¥
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** –ü–æ–ª–Ω–∞—è - –≤—Å–µ —Ç–∏–ø—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ App Router
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –•–æ—Ä–æ—à–∞—è - –≥–æ—Ç–æ–≤ –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

## üí° –ò–ó–í–õ–ï–ß–ï–ù–ù–´–ï –£–†–û–ö–ò

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—Ä–æ–∫–∏

- –í–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ TypeScript –∞–ª–∏–∞—Å–æ–≤
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –ª—É—á—à–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã (App Router) —É–ø—Ä–æ—â–∞—é—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

### –ü—Ä–æ—Ü–µ—Å—Å–Ω—ã–µ —É—Ä–æ–∫–∏

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á–∞—Å—Ç–æ –∑–Ω–∞–µ—Ç –ª—É—á—à–µ, —á—Ç–æ –µ–º—É –Ω—É–∂–Ω–æ
- –í–∞–∂–Ω–æ —É–º–µ—Ç—å –ø—Ä–∏–∑–Ω–∞—Ç—å –æ—à–∏–±–∫—É –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üîÑ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

1. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env.local`
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä: `pnpm dev`
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API: `http://localhost:3000/api/dive-sites`

### –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- –î–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑–∏ —Å `images` –∏ `site_reviews`
- –°–æ–∑–¥–∞—Ç—å UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º —Å–µ—Ä–≤–∏—Å–æ–º

## üìà –ú–ï–¢–†–ò–ö–ò –ó–ê–í–ï–†–®–ï–ù–ò–Ø

- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~30 –º–∏–Ω—É—Ç
- **–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:** 5
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~100
- **–û—à–∏–±–æ–∫:** 0 (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:** 100%

---

**–ê—Ä—Ö–∏–≤ —Å–æ–∑–¥–∞–Ω:** –î–µ–∫–∞–±—Ä—å 2024  
**–°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –∏ —Å–æ–∑–¥–∞–Ω–∏–µ UI
