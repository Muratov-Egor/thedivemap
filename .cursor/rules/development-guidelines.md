# Правила разработки для проекта TheDiveMap

## Общие правила

### 1. Интернационализация (i18n)

**КРИТИЧЕСКИ ВАЖНО:** Никогда не хардкодить текст в коде!

- Всегда используй `useTranslation` и ключи из файлов локализации
- Для UI текста используй: `const { t } = useTranslation('namespace')`
- Для ошибок API используй: `t('errors.errorKey')`
- Для плейсхолдеров используй: `t('placeholders.key')`
- Для кнопок используй: `t('buttons.key')`

**Примеры правильного использования:**

```tsx
// ✅ Правильно
const { t } = useTranslation('autocomplete');
<span>{t('errors.searchFailed')}</span>

// ❌ Неправильно
<span>Ошибка поиска</span>
```

### 2. Тестирование

- Всегда пиши тесты для новой функциональности
- Используй Page Object Pattern для E2E тестов
- Используй `data-testid` для локации элементов
- Тесты должны быть на английском языке
- Проверяй как успешные, так и ошибочные сценарии

### 3. Компоненты

- Используй TypeScript для всех компонентов
- Создавай переиспользуемые компоненты
- Следуй принципам DRY (Don't Repeat Yourself)
- Используй современные React паттерны (hooks, context)

### 4. Стилизация

- Используй Tailwind CSS
- Следуй дизайн-системе проекта
- Используй переменные цветов из конфига
- Поддерживай адаптивность

### 5. API и данные

- Всегда обрабатывай ошибки API
- Используй типизацию для API ответов
- Делай валидацию данных на клиенте
- Используй моки для тестирования

### 6. Производительность

- Используй React.memo для оптимизации
- Применяй useMemo и useCallback где необходимо
- Избегай лишних ре-рендеров
- Оптимизируй загрузку изображений

### 7. Безопасность

- Валидируй пользовательский ввод
- Не доверяй данным с сервера
- Используй HTTPS в продакшене
- Защищай от XSS атак

### 8. Код-стайл

- Используй Prettier для форматирования
- Следуй ESLint правилам
- Пиши понятные имена переменных и функций
- Добавляй комментарии к сложной логике

### 9. Git и коммиты

- Пиши понятные сообщения коммитов
- Используй conventional commits
- Не коммить большие файлы
- Создавай feature ветки для новых функций

### 10. Документация

- Обновляй README при изменении API
- Документируй сложную бизнес-логику
- Добавляй JSDoc к публичным функциям
- Веди changelog для релизов

## Специфичные правила для проекта

### Автокомплит

- Всегда обрабатывай состояния загрузки и ошибок
- Используй дебаунс для поиска
- Поддерживай клавиатурную навигацию
- Тестируй на мобильных устройствах

### Карта

- Оптимизируй рендеринг маркеров
- Используй кластеризацию для большого количества точек
- Поддерживай зум и панорамирование
- Кэшируй данные карты

### Фильтры

- Сохраняй состояние фильтров в URL
- Поддерживай множественный выбор
- Валидируй диапазоны значений
- Показывай количество результатов

## Чек-лист перед коммитом

- [ ] Все тексты используют i18n
- [ ] Написаны тесты для новой функциональности
- [ ] Код проходит линтер
- [ ] Компоненты типизированы
- [ ] Обработаны ошибки
- [ ] Проверена производительность
- [ ] Обновлена документация
- [ ] Протестировано на разных устройствах
